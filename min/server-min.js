var http=require("http"),messages=[{message:"thing"}],onRequest=function(e,n){if("GET"===e.method&&(n.writeHead(200,{Connection:"OK","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}),n.end(JSON.stringify(messages))),"POST"===e.method){var t="";e.on("data",function(e){t+=e.toString()}),e.on("end",function(){var e=JSON.parse(t);messages.push(e),n.writeHead(200,{Connection:"OK","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}),n.end(JSON.stringify(messages))})}"OPTIONS"===e.method&&(n.writeHead(200,{Connection:"OK","Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"OPTIONS, GET, POST","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept"}),n.end("{}"))};http.createServer(onRequest).listen(5757);